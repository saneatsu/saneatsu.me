# Cloudflare Workers configuration for Hono backend
name = "saneatsu-api"
main = "src/worker.ts"
compatibility_date = "2024-12-01"

# Node.js compatibility for full Hono features
compatibility_flags = ["nodejs_compat"]

# Enable Workers logging
[observability]
enabled = true

# Development configuration
[env.development]
name = "saneatsu-backend-dev"

[env.development.vars]
ENVIRONMENT = "development"

# Preview/staging environment
[env.preview]
name = "saneatsu-backend-preview"

[env.preview.vars]
ENVIRONMENT = "preview"

# Production environment
[env.production]
name = "saneatsu-backend"

[env.production.vars]
ENVIRONMENT = "production"

# Custom domain configuration for production
[[env.production.routes]]
pattern = "api.saneatsu.me/*"
zone_name = "saneatsu.me"

# Build configuration
[build]
command = "pnpm build"